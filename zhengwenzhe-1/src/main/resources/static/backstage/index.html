<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="../css/index.css">
<link rel="stylesheet" href="../layui/css/layui.css">
<link rel="stylesheet" href="../font-awesome-4.7.0/css/font-awesome.min.css">
<title>主页</title>
<style type="text/css">
.p1 {
	position: relative;
	top: 3px;
}
#ul li:hover{
	background-color: rgb(73,78,83)!important;
}
#ul a:hover{
	color:white!important;
}
.div-a{
	display: inline-block;
	width:200px;
	padding-left: 30px;
	margin-right: 0px!important;
	padding-right: 20px;
}
</style>
</head>
<body>
	<div class="container">
		<div class="page_config">
			<div class="header">
				<div class="head_title">
					<p class="fa fa-meetup">&nbsp;&nbsp;&nbsp;my blog</p>
				</div>
				<div class="head_url">
					<img id="img">
					<p class="p1">
						&nbsp;&nbsp;&nbsp;<span id="yhm">管理员</span>
					</p>
				</div>
			</div>
			<div class="bodyer" id="ul">
				<div class="dashboard_title">
					<p>Dashboard</p>
				</div>
				<div class="dashboard_model">
					<ul class="dashboard_model_console">
						<li id="home_page_li" class="lis" onclick="chang(this);" style="background:#007BFF!important;"><a style="color:white!important;width:200px;margin-left: 0px;padding-left: 40px;" href="../backstage/list/home_page.html"
							target="fy_iframe" class="nav-icon fa fa-dashboard"
							id="home_page">&nbsp;&nbsp;&nbsp;<span>Dashboard</span></a></li>
						<li id="issue_blog_li" class="lis" onclick="chang(this);"><a href="../backstage/list/issue_blog.html" style="width:200px;margin-left: 0px;padding-left: 40px;"
							target="fy_iframe" class="fa fa-pencil-square-o bk a2" id="issue_blog">&nbsp;&nbsp;&nbsp;<span>发布博客</span></a></li>
					</ul>
				</div>
				<div class="manager_model_title">
					<p>管理模块</p>
				</div>
				<div class="manager_model">
					<ul class="manager_model_console">
						<li id="blog_manager_li" onclick="chang(this);"><a
							href="../backstage/list/blog_manager.html" target="fy_iframe" style="width:200px;margin-left: 0px;padding-left: 40px;"
							class="fa fa-list-alt" id="blog_manager">&nbsp;&nbsp;&nbsp;<span>博客管理</span></a></li>
						<li id="comment_manager_li" onclick="chang(this);"><a
							href="../backstage/list/comment_manager.html" target="fy_iframe" style="width:200px;margin-left: 0px;padding-left: 40px;"
							class="fa fa-comments nav-icon" id="comment_manager">&nbsp;&nbsp;&nbsp;<span>评论管理</span></a></li>
						<li id="classify_manager_li" onclick="chang(this);"><a
							href="../backstage/list/classify_manager.html" target="fy_iframe" style="width:200px;margin-left: 0px;padding-left: 40px;"
							class="fa fa-bookmark nav-icon" id="classify_manager">&nbsp;&nbsp;&nbsp;<span>分类管理</span></a></li>
						<li id="label_manager_li" onclick="chang(this);"><a
							href="../backstage/list/label_manager.html" target="fy_iframe" style="width:200px;margin-left: 0px;padding-left: 40px;"
							class="fa fa-tags" id="label_manager">&nbsp;&nbsp;&nbsp;<span>标签管理</span></a></li>
						<li id="link_li" onclick="chang(this);"><a
							href="../backstage/list/link.html" target="fy_iframe" style="width:200px;margin-left: 0px;padding-left: 40px;"
							class="fa layui-icon layui-icon-heart-fill" id="link">&nbsp;&nbsp;&nbsp;<span>友情链接</span></a></li>
					</ul>
				</div>
				<div class="system_manager_title">
					<p>系统管理</p>
				</div>
				<div class="system_manager">
					<ul class="system_manager_console">
						<li onclick="chang(this);"><a href="../backstage/list/config.html" style="width:200px;margin-left: 0px;padding-left: 40px;" target="fy_iframe" class="fa fa-wrench">&nbsp;&nbsp;&nbsp;<span>系统配置</span></a></li>
						<li onclick="chang(this);"><a href="../backstage/list/admin_user.html" style="width:200px;margin-left: 0px;padding-left: 40px;" target="fy_iframe" class="fa fa-user-secret">&nbsp;&nbsp;&nbsp;<span>修改密码</span></a></li>
						<li onclick="chang(this);"><a href="javaSrcipt:void()" id="exit" style="width:200px;margin-left: 0px;padding-left: 40px;" class="fa fa-sign-out">&nbsp;&nbsp;&nbsp;<span>安全退出</span></a></li>
					</ul>
				</div>
			</div>
		</div>
		<div class="page_head" style="margin-top: 5px;">
			<div class="navigation_left">
				<a href="javaScript:void()" class="fa fa-reorder"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				<p>Dashboard</p>
			</div>
			<div class="navigation_right">
				<a href="../templates/index.html" class="fa fa-send">&nbsp;&nbsp;博客首页</a>
				<a href="#" class="fa fa-user" id="diva">&nbsp;&nbsp;作者</a>
				<div class="div-a3" style="display:none;position: absolute;right: 0px;z-index: -1;border: 1px #E0E0E0 solid;background: white" >
					<a href="#" class="div-a">
					<i class="fa fa-user-o mr-2"></i> 姓名 <span class="float-right text-muted text-sm">张三 / zhangsan</span>
					</a>
					<div class="dropdown-divider"></div>
					<a href="#" class="div-a">
					<i class="fa fa-user-secret mr-2"></i> 身份 <span class="float-right text-muted text-sm">Java初级工程师</span>
					</a>
					<div class="dropdown-divider"></div>
					<a href="#" class="div-a">
					<i class="fa fa-address-card mr-2"></i> 邮箱 <span class="float-right text-muted text-sm">123456789@qq.com</span>
					</a>
				</div>
			</div>
		</div>
		<iframe src="../backstage/list/home_page.html" frameborder="0" id="fy_iframe"
			name="fy_iframe" style="position:relative;z-index: 0;"></iframe>
	</div>
	<script type="text/javascript" src="../layui/layui.js"></script>
	<script type="text/javascript" src="../jquery-3.5.1/jquery-3.5.1.min.js"></script>
	<script type="text/javascript">

		window.onload = MyAutoRun();
		layui.use([ 'layer', 'form' ,'element'], function() {
			var form = layui.form, layer = layui.layer,$ = layui.jquery,element = layui.element;;
			
			var result;
			var url = window.location.search; //获取url中"?"符后的字串  
			var yhm = document.getElementById("yhm").innerText;
			if (url.indexOf("?") != -1) {
				result = url.substr(url.indexOf("=") + 1);
			}
			
			if (result == "1") {
				layer.msg("欢迎" + yhm);
				window.setInterval(function(){
					location.href="index.html";
				},1000)
			}

			
		});
		
		$("#exit").on('click',function(){
			layer.confirm('真的退出行么', function(index) {
				tc();
			});
		})
		
		$("#diva").mouseover(function (){
			$('.div-a3')[0].style.display = '';
			$('.div-a3')[0].style.zIndex = "0";
			$("#fy_iframe").css('zIndex', '-1');
		})
		
		$("#diva").mouseout(function (){
			$('.div-a3')[0].style.display = 'none';
			$('.div-a3')[0].style.zIndex = "-1";
			$("#fy_iframe").css('zIndex', '0');
		})
		
		function tc(){
			$.ajax({
				url:"/user/exit",
				success:function(){
					location.href="login.html?code=2";
				}
			})
		};
		function MyAutoRun(){
			$.ajax({
				url : "/config/list",
				success : function(res) {
					for (var i = 0; i < res.data.length; i++) {
						if(res.data[i].config_name=="yourName"){
							$.ajax({
								url : '/config/findByConfigName',
								data : {
									config_name : res.data[i].config_name
								},
								success : function(res) {
									$("#yhm").html(res.data.config_value)
								}
							})
						}
						if(res.data[i].config_name=="yourAvatar"){
							$.ajax({
								url : '/config/findByConfigName',
								data : {
									config_name : res.data[i].config_name
								},
								success : function(res) {
									$("#img").attr("src",res.data.config_value);
								}
							})
						}
					}
				}
			})
			
		};
			
		window.addEventListener('message', function(e) {
			
			var str = JSON.stringify(e.data);
			
			var str3 = "{\"code\":\"3\"}";
			var str4 = "{\"code\":\"4\"}";
			var str5 = "{\"code\":\"5\"}";
			var str6 = "{\"code\":\"6\"}";
			var str7 = "{\"code\":\"7\"}";
			var str8 = "{\"code\":\"8\"}";
			
			color(str,str3,"issue_blog_li","issue_blog");
			color(str,str4,"blog_manager_li","blog_manager");
			color(str,str5,"comment_manager_li","comment_manager");
			color(str,str6,"classify_manager_li","classify_manager");
			color(str,str7,"label_manager_li","label_manager");
			color(str,str8,"link_li","link");
			
		})
		function color(str,strN,li_id,a_id){
			if(str==strN){
				var arr = document.getElementById("ul").getElementsByTagName("a");
				var arrr = document.getElementById("ul").getElementsByTagName("li");
				for (var i = 0; i < arr.length; i++) {
					var a=arr[i];
					a.style.color="#c2c7d0";
				};
				for (var i = 0; i < arrr.length; i++) {
					var aa=arrr[i];
					aa.style.background="#343A40";
				};
				var li = document.getElementById(li_id);
				var a2 = document.getElementById(a_id);
				if(li == document.getElementById(li_id) && a2 == document.getElementById(a_id)){
					li.style.setProperty("background","rgb(0,123,255)","important");
					a2.style.setProperty("color","white","important");
				}
			}
		}
		
		function chang(obj) {
			var arr = document.getElementById("ul").getElementsByTagName("a");
			var arrr = document.getElementById("ul").getElementsByTagName("li");
			for (var i = 0; i < arr.length; i++) {
				var a=arr[i];
				a.style.color="#c2c7d0";
			};
			for (var i = 0; i < arrr.length; i++) {
				var aa=arrr[i];
				aa.style.background="#343A40";
			};
			obj.children[0].style.setProperty("color","white","important");
			obj.style.setProperty("background","#007BFF","important");
		}
		
	</script>
</body>
</html>